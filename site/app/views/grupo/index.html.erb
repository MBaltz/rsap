<h1>Grupo#index</h1>

<p id="notice"><%= notice %></p>

<h1>Grupos</h1>

<table>
	<thead>
		<tr>
			<th>Nome</th>
			<th>Descricao</th>
			<th>User</th>
			<th colspan="3"></th>
		</tr>
	</thead>

	<tbody>
		<% @grupos.each do |grupo| %>
		<tr>
			<td><% grupo.getUsers.each do |pessoa| %>	<%= pessoa.getNick %>	<% end %></td>
				<td><%= grupo.descricao %></td>
				<td><%= link_to 'Ver', "/grupos/#{grupo.id}" %></td>

				<% if eh_moderador(current_user, grupo) %>
					<td><%= link_to 'Editar', "/grupos/#{grupo.id}/edit" %></td>
					<td><%= link_to 'Apagar', "/grupos/#{grupo.id}", method: :delete, data: { confirm: 'Are you sure?' } %></td>
				<% end %>

				<% if eh_mebro_do_grupo(current_user, grupo) %>
					<td><%= link_to 'Quero sair', "/grupos/sair/#{grupo.id}", data: { confirm: 'Are you sure?' } %></td>
				<% else %>

					<% if !essa_solicitacao_existe(current_user, grupo) %>
						<td><%= link_to 'Quero entrar', "/grupos/solicitar/#{grupo.id}", data: { confirm: 'Are you sure?' } %></td>
					<% else %>
						<td>Solicitacao enviada</td>
					<% end %>
				<% end %>
			</tr>
			<% end %>
		</tbody>
	</table>

	<br>

	<%= link_to 'Novo Grupo', '/grupos/new' %>
